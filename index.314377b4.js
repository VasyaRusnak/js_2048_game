!function(){var t=new(function(){var t;function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this.size=t,this.score=0,this.status="idle",this.board=this.createBoard()}return t=[{key:"createBoard",value:function(){var t=this;return Array.from({length:this.size},function(){return Array(t.size).fill(0)})}},{key:"start",value:function(){this.score=0,this.status="playing",this.board=this.createBoard(),this.addRandomTile(),this.addRandomTile()}},{key:"restart",value:function(){this.start()}},{key:"getBoard",value:function(){return this.board}},{key:"getScore",value:function(){return this.score}},{key:"getStatus",value:function(){return this.status}},{key:"slideAndCombineRow",value:function(t){for(var e=t.filter(function(t){return 0!==t}),r=0;r<e.length-1;r++)e[r]===e[r+1]&&(e[r]*=2,this.score+=e[r],e[r+1]=0);for(e=e.filter(function(t){return 0!==t});e.length<this.size;)e.push(0);return e}},{key:"moveLeft",value:function(){for(var t=this,e=function(e){var a=t.slideAndCombineRow(t.board[e]);!s&&a.some(function(t,s){return t!==r.board[e][s]})&&(s=!0),t.board[e]=a},r=this,s=!1,a=0;a<this.size;a++)e(a);s&&this.addRandomTile(),this.checkStatus()}},{key:"moveRight",value:function(){for(var t=this,e=function(e){var a=t.slideAndCombineRow(t.board[e].slice().reverse()).reverse();!s&&a.some(function(t,s){return t!==r.board[e][s]})&&(s=!0),t.board[e]=a},r=this,s=!1,a=0;a<this.size;a++)e(a);s&&this.addRandomTile(),this.checkStatus()}},{key:"moveUp",value:function(){this.transpose(),this.moveLeft(),this.transpose()}},{key:"moveDown",value:function(){this.transpose(),this.moveRight(),this.transpose()}},{key:"transpose",value:function(){var t=this;this.board=this.board[0].map(function(e,r){return t.board.map(function(t){return t[r]})})}},{key:"checkStatus",value:function(){if(this.board.flat().includes(2048)){this.status="win";return}this.canMove()||(this.status="lose")}},{key:"addRandomTile",value:function(){for(var t=[],e=0;e<this.size;e++)for(var r=0;r<this.size;r++)0===this.board[e][r]&&t.push({r:e,c:r});if(t.length){var s=t[Math.floor(Math.random()*t.length)],a=s.r,i=s.c;this.board[a][i]=.1>Math.random()?4:2}}},{key:"canMove",value:function(){for(var t=0;t<this.size;t++)for(var e=0;e<this.size;e++)if(0===this.board[t][e]||e<this.size-1&&this.board[t][e]===this.board[t][e+1]||t<this.size-1&&this.board[t][e]===this.board[t+1][e])return!0;return!1}}],function(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}(e.prototype,t),e}()),e=document.querySelectorAll(".field-cell"),r=document.querySelector(".game-score"),s=document.querySelector(".start"),a=document.querySelector(".message-start"),i=document.querySelector(".message-win"),o=document.querySelector(".message-lose");function n(){var n=t.getBoard();e.forEach(function(t,e){var r=n[Math.floor(e/4)][e%4];t.textContent=0===r?"":r,t.className="field-cell"+(r?" field-cell--".concat(r):"")}),r.textContent=t.getScore(),a.classList.toggle("hidden","idle"!==t.getStatus()),i.classList.toggle("hidden","win"!==t.getStatus()),o.classList.toggle("hidden","lose"!==t.getStatus()),"idle"===t.getStatus()?(s.textContent="Start",s.classList.add("start"),s.classList.remove("restart")):(s.textContent="Restart",s.classList.remove("start"),s.classList.add("restart"))}s.addEventListener("click",function(){"idle"===t.getStatus()?t.start():t.restart(),n()}),document.addEventListener("keydown",function(e){if("playing"===t.getStatus()){switch(e.key){case"ArrowLeft":t.moveLeft();break;case"ArrowRight":t.moveRight();break;case"ArrowUp":t.moveUp();break;case"ArrowDown":t.moveDown();break;default:return}n()}}),n()}();
//# sourceMappingURL=index.314377b4.js.map
